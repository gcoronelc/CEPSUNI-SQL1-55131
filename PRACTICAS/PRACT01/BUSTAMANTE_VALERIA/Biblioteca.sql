--Base de datos
CREATE DATABASE BIBLIOTECA;
USE BIBLIOTECA;

--Base de datos:
CREATE TABLE PAIS(
    CODIGO VARCHAR(10)      NOT NULL,
    NOMBRE VARCHAR(100)      NOT NULL
);--OK


CREATE TABLE AUTOR(
    CODIGO VARCHAR(10)      NOT NULL,
    PATERNO VARCHAR(100)    NOT NULL,
    MATERNO VARCHAR(100)    NOT NULL,
    NOMBRES VARCHAR(100)    NOT NULL
);--OK


CREATE TABLE GENERO_LITERARIO(
    CODIGO VARCHAR(10)      NOT NULL,
    NOMBRE VARCHAR(100)     NOT NULL
);--OK



CREATE TABLE EDITORIAL(
    CODIGO VARCHAR(10)      NOT NULL,
    NOMBRE VARCHAR(100)     NOT NULL
);--OK


CREATE TABLE LIBRO(
    CODIGO VARCHAR(10)      NOT NULL,
    ISBN VARCHAR(10)        NOT NULL,
    TITULO VARCHAR(100)     NOT NULL,
    FECHA_PUBLI DATE        NOT NULL,
    EDICION VARCHAR(50)     NOT NULL,
    STOCK INT          NOT NULL,
    COD_GENERO VARCHAR(10)  NOT NULL,
    COD_EDITORIAL VARCHAR(10)  NOT NULL
);--OK




CREATE TABLE AUTOR_LIBRO(
    COD_LIBRO VARCHAR(10) NOT NULL,
    COD_AUTOR VARCHAR(10) NOT NULL 
);--OK

CREATE TABLE GENERO(
	CODIGO VARCHAR(10) NOT NULL,
	NOMBRE VARCHAR(100) NOT NULL
);--OK


CREATE TABLE DIRECCION(
    CODIGO VARCHAR(10)    NOT NULL,
    NOMBRE_CALLE VARCHAR(100)  NOT NULL,
    NUMERO_CALLE VARCHAR(10)   NOT NULL,
    DISTRITO VARCHAR(50)       NOT NULL
);


CREATE TABLE CLIENTE(
    CODIGO VARCHAR(10) NOT NULL,
    COD_PAIS VARCHAR(10)    NOT NULL,
    DOCUMENTO VARCHAR(10)   NOT NULL,
    PATERNO VARCHAR(100)    NOT NULL,
    MATERNO VARCHAR(100)    NOT NULL,
    NOMBRES VARCHAR(100)    NOT NULL,
    COD_GENERO  VARCHAR(10)     NOT NULL,
    FEC_NAC DATE         NOT NULL,
    TELEFONO VARCHAR(9)     NOT NULL,
    CORREO VARCHAR(50)      NOT NULL,
    FECHA_REGI DATE         NOT NULL,
	COD_DIRECCION VARCHAR(10) NOT NULL
);--OK








CREATE TABLE EMPLEADO(
    CODIGO VARCHAR(10) NOT NULL,
    COD_PAIS VARCHAR(10)    NOT NULL,
    DOCUMENTO VARCHAR(10)   NOT NULL,
    PATERNO VARCHAR(100)    NOT NULL,
    MATERNO VARCHAR(100)    NOT NULL,
    NOMBRES VARCHAR(100)    NOT NULL,
    COD_GENERO  VARCHAR(10) NOT NULL,
    FECHA_NACI DATE         NOT NULL,
    TELEFONO VARCHAR(9)     NOT NULL,
    CORREO VARCHAR(50)      NOT NULL,
    FECHA_REGI DATE         NOT NULL,
    SUELDO NUMERIC(8,3)		NOT NULL
);--OK



CREATE TABLE PRESTAMO(
    CODIGO VARCHAR(10) NOT NULL,
    COD_CLIENTE VARCHAR(10) NOT NULL,
    COD_EMPLEADO VARCHAR(10) NOT NULL,
    FEC_INICIO DATE NOT NULL,--01/03/2021
    FEC_FIN DATE NOT NULL,--06/03/2021
	FEC_DEV DATE NOT NULL,--09/03/2021
    ESTADO VARCHAR(20) NOT NULL--EN PROCESO, DEVUELTO,NO DEVUELTO,RETRASO
);--OK



CREATE TABLE DETALLE(
    COD_PRESTAMO VARCHAR(10) NOT NULL,
    COD_LIBRO VARCHAR(10) NOT NULL
);--OK



--RESTRICCIÓN


--TABLA PAIS 
ALTER TABLE PAIS ADD CONSTRAINT PK_PAISES PRIMARY KEY(CODIGO);--OK
ALTER TABLE PAIS ADD CONSTRAINT u_NomP UNIQUE (NOMBRE);--OK


--TABLA AUTORES
ALTER TABLE AUTOR ADD CONSTRAINT PK_AUTORES PRIMARY KEY(CODIGO);--OK


--TABLA EDITORIALES

ALTER TABLE EDITORIAL ADD CONSTRAINT PK_EDITORIALES PRIMARY KEY(CODIGO);--OK
ALTER TABLE EDITORIAL ADD CONSTRAINT u_NomE UNIQUE (NOMBRE);--OK


--TABLA GENEROS LITERIOS

ALTER TABLE GENERO_LITERARIO ADD CONSTRAINT PK_GENERO_LIT PRIMARY KEY(CODIGO);--OK
ALTER TABLE GENERO_LITERARIO ADD CONSTRAINT u_NomGL UNIQUE (NOMBRE);--OK


--TABLA LIBROS
ALTER TABLE LIBRO ADD CONSTRAINT PK_LIBROS PRIMARY KEY(CODIGO);--OK
ALTER TABLE LIBRO ADD CONSTRAINT FK_GENERO_L FOREIGN KEY (COD_GENERO) REFERENCES GENERO_LITERARIO(CODIGO);--OK
ALTER TABLE LIBRO ADD CONSTRAINT FK_EDITORIAL FOREIGN KEY (COD_EDITORIAL) REFERENCES EDITORIAL(CODIGO);--OK
ALTER TABLE LIBRO ADD CONSTRAINT CK_STOCK CHECK (STOCK>0);--OK



--TABLA AUTORES_LIBROS

ALTER TABLE AUTOR_LIBRO ADD CONSTRAINT FK_LIB FOREIGN KEY (COD_LIBRO) REFERENCES LIBRO(CODIGO);--OK
ALTER TABLE AUTOR_LIBRO ADD CONSTRAINT FK_AUTO FOREIGN KEY (COD_AUTOR) REFERENCES AUTOR(CODIGO);--OK
ALTER TABLE AUTOR_LIBRO ADD CONSTRAINT PK_AUT_LIB PRIMARY KEY (COD_LIBRO,COD_AUTOR);--OK


--TABLA GENEROS
ALTER TABLE GENERO ADD CONSTRAINT PK_GENERO PRIMARY KEY(CODIGO);--OK
ALTER TABLE GENERO ADD CONSTRAINT U_GEN UNIQUE (NOMBRE);--OK


--TABLA EMPLEADOS
ALTER TABLE EMPLEADO ADD CONSTRAINT PK_EMPLEADOS PRIMARY KEY(CODIGO);--OK
ALTER TABLE EMPLEADO ADD CONSTRAINT FK_PAIS_E FOREIGN KEY (COD_PAIS) REFERENCES PAIS(CODIGO);--OK
ALTER TABLE EMPLEADO ADD CONSTRAINT FK_GEN_EMP FOREIGN KEY (COD_GENERO) REFERENCES GENERO(CODIGO);--OK
ALTER TABLE EMPLEADO ADD CONSTRAINT u_DocE UNIQUE (DOCUMENTO);--OK
ALTER TABLE EMPLEADO ADD CONSTRAINT CK_SUELDO CHECK (SUELDO>0);--OK
ALTER TABLE EMPLEADO ADD CONSTRAINT U_TEL_EMP UNIQUE (TELEFONO);--OK
ALTER TABLE EMPLEADO ADD CONSTRAINT U_COR_EMP UNIQUE (CORREO);--OK

--TABLA DIRECCIONES

ALTER TABLE DIRECCION ADD CONSTRAINT PK_DIRECCION PRIMARY KEY(CODIGO);--OK



--TABLA CLIENTES
ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTES PRIMARY KEY(CODIGO);--OK
ALTER TABLE CLIENTE ADD CONSTRAINT FK_PAIS_U FOREIGN KEY (COD_PAIS) REFERENCES PAIS(CODIGO);--OK
ALTER TABLE CLIENTE ADD CONSTRAINT FK_GEN_CLI FOREIGN KEY (COD_GENERO) REFERENCES GENERO(CODIGO);--OK
ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLI_DIR FOREIGN KEY (COD_DIRECCION) REFERENCES DIRECCION(CODIGO);--OK
ALTER TABLE CLIENTE ADD CONSTRAINT u_DocU UNIQUE (DOCUMENTO);--OK
ALTER TABLE CLIENTE ADD CONSTRAINT U_TEL_CLI UNIQUE (TELEFONO);--OK
ALTER TABLE CLIENTE ADD CONSTRAINT U_COR_CLI UNIQUE (CORREO);--OK




--TABLA PRÉSTAMOS

ALTER TABLE PRESTAMO ADD CONSTRAINT PK_PRESTAMOS PRIMARY KEY(CODIGO);
ALTER TABLE PRESTAMO ADD CONSTRAINT FK_COD_CLI FOREIGN KEY (COD_CLIENTE) REFERENCES CLIENTE(CODIGO);
ALTER TABLE PRESTAMO ADD CONSTRAINT FK_COD_E FOREIGN KEY (COD_EMPLEADO) REFERENCES EMPLEADO(CODIGO);
ALTER TABLE PRESTAMO ADD CONSTRAINT ck_E_EP CHECK (ESTADO IN ('DEVUELTO','NO DEVUELTO','RETRASO'));


--TABLA DETALLES

ALTER TABLE DETALLE ADD CONSTRAINT FK_PRES_DET FOREIGN KEY (COD_PRESTAMO) REFERENCES PRESTAMO(CODIGO);--OK
ALTER TABLE DETALLE ADD CONSTRAINT FK_LIB_DET FOREIGN KEY (COD_LIBRO) REFERENCES LIBRO(CODIGO);--OK
ALTER TABLE DETALLE ADD CONSTRAINT PK_PRES_LIB PRIMARY KEY (COD_PRESTAMO,COD_LIBRO);--OK





--Datos

/****************PAISES*********************************/
INSERT INTO PAIS VALUES('P01','Perú');
INSERT INTO PAIS VALUES('P02','Colombia');
INSERT INTO PAIS VALUES('P03','Sudráfica');
INSERT INTO PAIS VALUES('P04','Argentina');
INSERT INTO PAIS VALUES('P05','Inglaterra');
INSERT INTO PAIS VALUES('P06','Estados Unidos');
INSERT INTO PAIS VALUES('P07','Venezuela');
INSERT INTO PAIS VALUES('P08','Ecuador');
INSERT INTO PAIS VALUES('P09','Paraguay');
INSERT INTO PAIS VALUES('P10','Bolvia');
INSERT INTO PAIS VALUES('P11','Brazil');

/******************AUTORES*************************************/
INSERT INTO AUTOR VALUES('AT01','Vargas','Llosa','Mario');
INSERT INTO AUTOR VALUES('AT02','Ramón','Ribeyro','Julio');
INSERT INTO AUTOR VALUES('AT03','Vallejo','Mendoza','César Abraham');
INSERT INTO AUTOR VALUES('AT04','Arguedas','Altamirano','José María');
INSERT INTO AUTOR VALUES('AT05','Bryce','Echenique','Alfredo Marcelo');
INSERT INTO AUTOR VALUES('AT06','Alegría','Bazán','Ciro');
INSERT INTO AUTOR VALUES('AT07','Palma','Soriano','Manuel Ricardo');
INSERT INTO AUTOR VALUES('AT08','Mariátegui','La Chira','José Carlos');
INSERT INTO AUTOR VALUES('AT09','Valdelomar','Pinto','Pedro Abraham');
INSERT INTO AUTOR VALUES('AT10','González','Prada','Manuel');

INSERT INTO AUTOR VALUES('AT11','Suárez','de Figueroa','Gómez');
INSERT INTO AUTOR VALUES('AT12','Eguren','Rodríguez','José María');
INSERT INTO AUTOR VALUES('AT13','Varela','Gonzales','Blanca Leonor');
INSERT INTO AUTOR VALUES('AT14','De la Fuente','Benavides','Ramón Rafael');
INSERT INTO AUTOR VALUES('AT15','Scorza','Torres','Manuel');
INSERT INTO AUTOR VALUES('AT16','Garcia','Marquez','Gabriel');
INSERT INTO AUTOR VALUES('AT17','Reuel','Tolkien','John');--Error de comilla
INSERT INTO AUTOR VALUES('AT18','Luis','Borges','Jorge');
INSERT INTO AUTOR VALUES('AT19','Huffman','Dickens','Charles');
INSERT INTO AUTOR VALUES('AT20','Edwin','King','Stephen');

/******************GENERO LITERARIOS*************************************/
INSERT INTO GENERO_LITERARIO VALUES('GL01','Terror');
INSERT INTO GENERO_LITERARIO VALUES('GL02','Ficcion');
INSERT INTO GENERO_LITERARIO VALUES('GL03','Cuento');
INSERT INTO GENERO_LITERARIO VALUES('GL04','Fantasia');
INSERT INTO GENERO_LITERARIO VALUES('GL05','Policial');
INSERT INTO GENERO_LITERARIO VALUES('GL06','Novela');
INSERT INTO GENERO_LITERARIO VALUES('GL07','Poesia');
INSERT INTO GENERO_LITERARIO VALUES('GL08','Cronicas');
INSERT INTO GENERO_LITERARIO VALUES('GL09','Ensayo');
INSERT INTO GENERO_LITERARIO VALUES('GL10','Novela Historica');

/******************EDITORIAL*************************************/
INSERT INTO EDITORIAL VALUES('ED01','Arcadia');
INSERT INTO EDITORIAL VALUES('ED02','Arica');
INSERT INTO EDITORIAL VALUES('ED03','Argos');
INSERT INTO EDITORIAL VALUES('ED04','Alianza');
INSERT INTO EDITORIAL VALUES('ED05','Antawara');
INSERT INTO EDITORIAL VALUES('ED06','Atalaya');
INSERT INTO EDITORIAL VALUES('ED07','Artnovela Ediciones');
INSERT INTO EDITORIAL VALUES('ED08','Arcángel');
INSERT INTO EDITORIAL VALUES('ED09','Arybalo');
INSERT INTO EDITORIAL VALUES('ED10','Asma Editores');

INSERT INTO EDITORIAL VALUES('ED11','Auge Editores');
INSERT INTO EDITORIAL VALUES('ED12','Alba');
INSERT INTO EDITORIAL VALUES('ED13','Alfaguara');
INSERT INTO EDITORIAL VALUES('ED14','Gredos');
INSERT INTO EDITORIAL VALUES('ED15','Planeta');
INSERT INTO EDITORIAL VALUES('ED16','Salamandra');
INSERT INTO EDITORIAL VALUES('ED17','Taurus');
INSERT INTO EDITORIAL VALUES('ED18','Valdemar');
INSERT INTO EDITORIAL VALUES('ED19','Urano');
INSERT INTO EDITORIAL VALUES('ED20','Siruela');


/**************************LIBROS****************************************/
INSERT INTO LIBRO VALUES('LB01','97717265','IT','2019/03/20','Quinta',75,'GL01','ED13');
INSERT INTO LIBRO VALUES('LB02','18237131','Oliver Twist','2018/11/25','Tercera',20,'GL02','ED05');
INSERT INTO LIBRO VALUES('LB03','81831371','Ficciones','2015/08/26','Cuarta',50,'GL03','ED01');
INSERT INTO LIBRO VALUES('LB04','93049242','El Señor de los Anillos','2006/10/16','Octava',60,'GL04','ED09');
INSERT INTO LIBRO VALUES('LB05','91309231','Crónica de una muerte anunciada','2010/04/12','Tercera',30,'GL05','ED15');
INSERT INTO LIBRO VALUES('LB06','20319231','Redoble por Rancas: Balada 1','2012/12/12','Septima',25,'GL02','ED02');
INSERT INTO LIBRO VALUES('LB07','92102931','La casa de cartón','2013/02/19','Octava',40,'GL06','ED18');
INSERT INTO LIBRO VALUES('LB08','20931302','Ese puerto existe','2019/03/12','Tercera',70,'GL07','ED06');
INSERT INTO LIBRO VALUES('LB09','10323123','El andarín de la noche','2013/02/19','Segunda',75,'GL07','ED20');
INSERT INTO LIBRO VALUES('LB10','98213911','La Florida del Inca','2014/02/19','Cuarta',70,'GL08','ED16');
INSERT INTO LIBRO VALUES('LB11','30193123','Pájinas libres','2019/03/20','Quinta',30,'GL02','ED03');
INSERT INTO LIBRO VALUES('LB12','82318321','El caballero Carmelo','2019/03/20','Cuarta',40,'GL03','ED10');
INSERT INTO LIBRO VALUES('LB13','91823913','7 Ensayos','2009/10/12','Segunda',65,'GL09','ED17');
INSERT INTO LIBRO VALUES('LB14','19832921','Tradiciones peruanas','2019/03/20','Quinta',30,'GL10','ED12');
INSERT INTO LIBRO VALUES('LB15','12319313','Los perros hambrientos','2008/02/26','Novena',80,'GL02','ED04');
INSERT INTO LIBRO VALUES('LB16','13291823','Un mundo para Julius','2015/06/10','Sexta',75,'GL02','ED14');
INSERT INTO LIBRO VALUES('LB17','12301932','Los ríos profundos','2010/01/01','Quinta',80,'GL02','ED08');
INSERT INTO LIBRO VALUES('LB18','91930123','Trilce','2009/09/15','Tercera',40,'GL07','ED19');
INSERT INTO LIBRO VALUES('LB19','12391213','La palabra del mudo','2008/10/28','Septima',20,'GL03','ED07');
INSERT INTO LIBRO VALUES('LB20','74385732','La fiesta del Chivo','2005/11/29','Octava',70,'GL06','ED11');

/************************************AUTORES_LIBROS**************************************/
INSERT INTO AUTOR_LIBRO VALUES('LB01','AT20');
INSERT INTO AUTOR_LIBRO VALUES('LB02','AT19');
INSERT INTO AUTOR_LIBRO VALUES('LB03','AT18');
INSERT INTO AUTOR_LIBRO VALUES('LB04','AT17');
INSERT INTO AUTOR_LIBRO VALUES('LB05','AT16');
INSERT INTO AUTOR_LIBRO VALUES('LB06','AT15');
INSERT INTO AUTOR_LIBRO VALUES('LB07','AT14');
INSERT INTO AUTOR_LIBRO VALUES('LB08','AT13');
INSERT INTO AUTOR_LIBRO VALUES('LB09','AT12');
INSERT INTO AUTOR_LIBRO VALUES('LB10','AT11');
INSERT INTO AUTOR_LIBRO VALUES('LB11','AT10');
INSERT INTO AUTOR_LIBRO VALUES('LB12','AT09');
INSERT INTO AUTOR_LIBRO VALUES('LB13','AT08');
INSERT INTO AUTOR_LIBRO VALUES('LB14','AT07');
INSERT INTO AUTOR_LIBRO VALUES('LB15','AT06');
INSERT INTO AUTOR_LIBRO VALUES('LB16','AT05');
INSERT INTO AUTOR_LIBRO VALUES('LB17','AT04');
INSERT INTO AUTOR_LIBRO VALUES('LB18','AT03');
INSERT INTO AUTOR_LIBRO VALUES('LB19','AT02');
INSERT INTO AUTOR_LIBRO VALUES('LB20','AT01');
INSERT INTO AUTOR_LIBRO VALUES('LB01','AT19');
INSERT INTO AUTOR_LIBRO VALUES('LB01','AT18');
INSERT INTO AUTOR_LIBRO VALUES('LB01','AT17');
INSERT INTO AUTOR_LIBRO VALUES('LB01','AT16');


/****************GENEROS***********/
INSERT INTO GENERO VALUES('G01','MASCULINO');
INSERT INTO GENERO VALUES('G02','FEMENINO');
INSERT INTO GENERO VALUES('G03','OTROS');


/*************************************DIRECCIONES********************************* RELACION DE UNO A UNO*/
INSERT INTO DIRECCION VALUES('D01','Los Rosales','511','Lima');
INSERT INTO DIRECCION VALUES('D02','Shangrila','299','Lima');
INSERT INTO DIRECCION VALUES('D03','Los Pinos','778','Lima');
INSERT INTO DIRECCION VALUES('D04','Los cedros','554','Lima');
INSERT INTO DIRECCION VALUES('D05','Bulevard','123','Lima');
INSERT INTO DIRECCION VALUES('D06','Malecon','321','Lima');
INSERT INTO DIRECCION VALUES('D07','La Mercede','654','Lima');
INSERT INTO DIRECCION VALUES('D08','Cinco Esquinas','456','Lima');
INSERT INTO DIRECCION VALUES('D09','Camelia','789','Lima');
INSERT INTO DIRECCION VALUES('D10','Feuntes','987','Lima');
INSERT INTO DIRECCION VALUES('D11','Antonio Sucre','111','Lima');
INSERT INTO DIRECCION VALUES('D12','Robles','505','Lima');
INSERT INTO DIRECCION VALUES('D13','Establo','204','Lima');
INSERT INTO DIRECCION VALUES('D14','Domingo Cueto','207','Lima');
INSERT INTO DIRECCION VALUES('D15','Pericotes','142','Lima');
INSERT INTO DIRECCION VALUES('D16','Panteoncito','266','Lima');
INSERT INTO DIRECCION VALUES('D17','Peines','666','Lima');
INSERT INTO DIRECCION VALUES('D18','Colmillo','616','Lima');
INSERT INTO DIRECCION VALUES('D19','Malambo','265','Lima');
INSERT INTO DIRECCION VALUES('D20','Falquitrera del Diablo','208','Lima');



/*********************************CLIENTES*************************************/
INSERT INTO CLIENTE VALUES('US01','P01','87128371','King', 'Konchhar', 'Steven','G01','1999/12/28','956722198','steven@gmail.com','2017/07/25','D01');
INSERT INTO CLIENTE VALUES('US02','P02','71723172','Enst', 'Austin', 'Bruce','G01','1994/03/17','956720397','austin@gmail.com','2016/04/09','D02');
INSERT INTO CLIENTE VALUES('US03','P03','77126371','Faviet', 'Chen', 'Neena','G02','1993/07/05','956197396','neena@gmail.com','2018/05/10','D03');
INSERT INTO CLIENTE VALUES('US04','P03','71231821','Wooles', 'Denisevich', 'Karry','G02','1999/12/11','956839175','karry@gmail.com','2015/08/10','D04');
INSERT INTO CLIENTE VALUES('US05','P03','71273671','Whalen','Grant','Jennifer','G02','1989/06/03','952839164','jennifer@gmail.com','2018/12/24','D05');
INSERT INTO CLIENTE VALUES('US06','P02','71263131','Gietz','Higgins','Shelley','G02','1995/11/24','956158393','shelley@gmail.com','2017/07/24','D06');
INSERT INTO CLIENTE VALUES('US07','P04','78213911','Mavris','Baer','Susan','G02','1979/12/23','952839142','susan@gmail.com','2019/10/27','D07');
INSERT INTO CLIENTE VALUES('US08','P04','72183912','Hartstein','OConnell','Donald','G01','1991/06/07','952831391','oconnell@gmail.com','2018/03/01','D08');
INSERT INTO CLIENTE VALUES('US09','P09','74385734','Walsh','Feeney','Alana','G02','1990/03/22','951268390','walsh@gmail.com','2015/05/20','D09');
INSERT INTO CLIENTE VALUES('US10','P06','72834728','McCain','Jones','Samuel','G01','1990/05/16','998311982','mcCain@gmail.com','2017/04/21','D10');
INSERT INTO CLIENTE VALUES('US11','P09','73284723','Bell','Everett','Sarah','G02','1996/07/29','981088398','everett@gmail.com','2018/06/19','D11');
INSERT INTO CLIENTE VALUES('US12','P07','72347244','Gates','Perkins','Timothy','G01','1999/04/21','959673983','perkins@gmail.com','2015/12/24','D12');
INSERT INTO CLIENTE VALUES('US13','P08','72342934','Chung','Dilly','Kelly','G02','1996/10/22','867783981','chung@gmail.com','2015/07/31','D13');
INSERT INTO CLIENTE VALUES('US14','P08','76543458','Dellinger','Cabrio','Anthony','G01','1996/07/29','958234872','antho@gmail.com','2016/10/11','D14');
INSERT INTO CLIENTE VALUES('US15','P06','78237423','Sarchand','Geoni','Girard','G01','1989/08/25','982139821','geoni@gmail.com','2019/04/05','D15');
INSERT INTO CLIENTE VALUES('US16','P09','72384723','Fleaur','Sullivan','Jean','G02','1997/07/22','981231233','fleaur@gmail.com','2018/06/10','D16');
INSERT INTO CLIENTE VALUES('US17','P05','72312345','Johson','Taylor','Winston','G01','1994/06/21','991823912','winston@gmail.com','2019/01/10','D17');--documento repetido
INSERT INTO CLIENTE VALUES('US18','P10','72643753','Kumar','Abel','Ellen','G01','1990/11/30','983129843','ellen@gmail.com','2016/09/17','D18');
INSERT INTO CLIENTE VALUES('US19','P01','79384292','Smite','Bates','Willian','G01','1992/07/02','982349823','bates@gmail.com','2016/09/17','D19');
INSERT INTO CLIENTE VALUES('US20','P01','73249823','Bloom','Fox','Harrison','G01','1995/05/02','983249282','bloom@gmail.com','2018/04/28','D20');



/*******************************EMPLEADOS***************************************/
INSERT INTO EMPLEADO VALUES('EM01','P01','75557523','Diaz','Tello','Karol','G02','1999/04/21','956728394','diaz777@gmail.com','2017/04/10',1500);
INSERT INTO EMPLEADO VALUES('EM02','P03','74457421','Celis','Carhuachipa','Zoe','G02','2000/09/15','956728398','sandiaemo@gmail.com','2019/08/01',1300);
INSERT INTO EMPLEADO VALUES('EM03','P05','75357129','Obrador','Westbrook','Andres','G01','1996/08/06','956728397','russel22@gmail.com','2019/10/16',1250);
INSERT INTO EMPLEADO VALUES('EM04','P07','76235295','Capdevila','Vega','Jenyffer','G02','1994/08/11','956728396','jenymon@gmail.com','2017/04/28',1100);
INSERT INTO EMPLEADO VALUES('EM05','P09','77157321','Harden','Lopez','Federico','G01','1992/06/09','956728395','lopezh@gmail.com','2019/01/10',1500);
INSERT INTO EMPLEADO VALUES('EM06','P01','78757423','James','Montecruz','Carlos','G01','2001/09/14','956728393','karlozm@gmail.com','2019/08/15',1600);
INSERT INTO EMPLEADO VALUES('EM07','P09','79657525','Ruiz','Orozco','Erick','G01','2000/02/18','956728392','ericl@gmail.com','2018/10/19',1300);
INSERT INTO EMPLEADO VALUES('EM08','P01','71557728','Andrade','Luna','Frank','G01','1990/06/20','956728391','nagato@gmail.com','2015/11/09',1700);
INSERT INTO EMPLEADO VALUES('EM09','P06','72457627','Villegas','Domingues','Camilo','G01','2000/04/21','956728390','sextoC@gmail.com','2019/12/11',1750);
INSERT INTO EMPLEADO VALUES('EM10','P01','73357526','Engels','Gates','Piero','G01','1988/04/10','99928398','pierin@gmail.com','2018/03/03',1900);
INSERT INTO EMPLEADO VALUES('EM11','P04','74297469','Mamani','Jobs','Francisco','G01','1995/11/15','988828398','panxo@gmail.com','2018/02/13',1320);
INSERT INTO EMPLEADO VALUES('EM12','P01','75157921','Ramos','Veracruz','Diana','G02','2000/01/01','956723398','dianaa@gmail.com','2018/05/09',1500);
INSERT INTO EMPLEADO VALUES('EM13','P02','75957825','Guerrero','Gave','Rosmery','G02','1998/10/31','956778398','gave@gmail.com','2019/07/11',1700);
INSERT INTO EMPLEADO VALUES('EM14','P01','75857321','Andrade','Godoy','Wily','G01','1997/12/31','95622838','godoy002@gmail.com','2019/06/10',1600);
INSERT INTO EMPLEADO VALUES('EM15','P02','75757129','Alfajo','Valdes','Samuel','G01','1992/12/25','95628398','killme@gmail.com','2016/10/12',1550);
INSERT INTO EMPLEADO VALUES('EM16','P07','77785857','Chicana','Henriques','Andy','G01','1997/07/28','95628391','funny21@gmail.com','2018/10/29',1530);
INSERT INTO EMPLEADO VALUES('EM17','P06','71587820','Gaviria','Escobar','Marco','G01','2001/10/27','95678398','priviet@gmail.com','2019/11/15',1650);
INSERT INTO EMPLEADO VALUES('EM18','P05','75715959','Velis','Luque','Valeria','G02','2000/10/14','915528398','oee777@gmail.com','2019/12/17',1750);
INSERT INTO EMPLEADO VALUES('EM19','P04','77695127','Celis','Carhuachipa','Berenise','G02','1998/08/16','912228398','univ@gmail.com','2016/10/16',1560);
INSERT INTO EMPLEADO VALUES('EM20','P03','75533153','Gallardo','Peña','Milagros','G02','1999/02/27','914428398','mila@gmail.com','2017/08/16',1500);

/**********************PRÉSTAMOS********************************************/
INSERT INTO PRESTAMO VALUES('EP01','US20','EM01','2020/06/14','2020/06/19','2020/06/18','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP02','US19','EM20','2020/05/20','2020/05/25','2020/05/29','RETRASO');
INSERT INTO PRESTAMO VALUES('EP03','US18','EM03','2020/06/14','2020/06/19','2020/06/27','RETRASO');
INSERT INTO PRESTAMO VALUES('EP04','US17','EM18','2020/06/14','2020/06/19','2020/06/29','RETRASO');
INSERT INTO PRESTAMO VALUES('EP05','US16','EM05','2020/01/30','2020/02/04','2020/02/03','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP06','US15','EM16','2020/05/15','2020/05/20','2020/05/30','RETRASO');
INSERT INTO PRESTAMO VALUES('EP07','US14','EM07','2020/10/16','2020/10/19','2020/10/19','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP08','US13','EM14','2020/03/20','2020/03/25','2020/03/24','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP09','US12','EM09','2020/03/20','2020/03/25','2020/03/25','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP10','US11','EM12','2020/09/15','2020/09/15','2020/09/19','RETRASO');
INSERT INTO PRESTAMO VALUES('EP11','US10','EM11','2020/09/15','2020/09/19','2020/09/26','RETRASO');
INSERT INTO PRESTAMO VALUES('EP12','US09','EM10','2020/01/30','2020/02/03','2020/02/03','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP13','US08','EM13','2020/08/20','2020/08/25','2020/08/30','RETRASO');
INSERT INTO PRESTAMO VALUES('EP14','US07','EM08','2020/06/06','2020/06/09','2020/06/09','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP15','US06','EM15','2020/09/10','2020/09/15','2020/09/20','RETRASO');
INSERT INTO PRESTAMO VALUES('EP16','US05','EM06','2020/08/27','2020/09/02','2020/09/01','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP17','US04','EM17','2020/07/18','2020/07/22','2020/07/24','RETRASO');
INSERT INTO PRESTAMO VALUES('EP18','US03','EM04','2020/01/30','2020/02/03','2020/02/02','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP19','US02','EM19','2020/06/14','2020/06/19','2020/06/18','DEVUELTO');
INSERT INTO PRESTAMO VALUES('EP20','US01','EM02','2020/06/14','2020/06/19','2020/06/18','DEVUELTO');



/*********************************DETALLE_PRESTAMOS******************************************/
INSERT INTO DETALLE VALUES('EP20','LB10');
INSERT INTO DETALLE VALUES('EP19','LB01');
INSERT INTO DETALLE VALUES('EP18','LB11');
INSERT INTO DETALLE VALUES('EP17','LB02');
INSERT INTO DETALLE VALUES('EP16','LB12');
INSERT INTO DETALLE VALUES('EP15','LB03');
INSERT INTO DETALLE VALUES('EP14','LB13');
INSERT INTO DETALLE VALUES('EP13','LB04');
INSERT INTO DETALLE VALUES('EP12','LB14');
INSERT INTO DETALLE VALUES('EP11','LB05');
INSERT INTO DETALLE VALUES('EP10','LB15');
INSERT INTO DETALLE VALUES('EP09','LB06');
INSERT INTO DETALLE VALUES('EP08','LB16');
INSERT INTO DETALLE VALUES('EP07','LB07');
INSERT INTO DETALLE VALUES('EP06','LB17');
INSERT INTO DETALLE VALUES('EP05','LB08');
INSERT INTO DETALLE VALUES('EP04','LB18');
INSERT INTO DETALLE VALUES('EP03','LB09');
INSERT INTO DETALLE VALUES('EP02','LB19');
INSERT INTO DETALLE VALUES('EP01','LB20');


SELECT P.CODIGO AS "NRO. PRESTAMO",CONCAT(CONCAT(CONCAT(CONCAT(E.PATERNO,' '),E.MATERNO),' '),E.NOMBRES) AS "EMPLEADO",
	   CONCAT(CONCAT(CONCAT(CONCAT(C.PATERNO,' '),C.MATERNO),' '),C.NOMBRES) AS "CLIENTE",L.TITULO AS "LIBRO",GL.NOMBRE AS "GENERO LITERARIO",
	   P.FEC_INICIO AS "FECHA DE PRESTAMO",P.FEC_FIN AS "FECHA DE DEVOLUCION",P.ESTADO
FROM DETALLE D
	INNER JOIN PRESTAMO P ON(P.CODIGO=D.COD_PRESTAMO)
	INNER JOIN CLIENTE C ON(C.CODIGO=P.COD_CLIENTE)
	INNER JOIN EMPLEADO E ON(E.CODIGO=P.COD_EMPLEADO)
	INNER JOIN LIBRO L ON(L.CODIGO=D.COD_LIBRO)
	INNER JOIN GENERO_LITERARIO GL ON(GL.CODIGO=L.COD_GENERO)
WHERE P.ESTADO='DEVUELTO';
	
